<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title> Image Gallery </title>
  <style>
    /* ---------- Basic reset ---------- */
    * { box-sizing: border-box; margin: 0; padding: 0; }
    html,body { height: 100%; font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; background: #0f1724; color: #e6eef8; -webkit-font-smoothing:antialiased; }

    /* ---------- Page layout ---------- */
    .container {
      max-width: 1200px;
      margin: 28px auto;
      padding: 20px;
    }
    header {
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:16px;
      margin-bottom:18px;
    }
    h1 { font-size:1.25rem; letter-spacing:0.2px; }
    p.lead { color:#bcd3f0; font-size:0.95rem; }

    /* ---------- Filter buttons ---------- */
    .filters {
      display:flex;
      gap:8px;
      flex-wrap:wrap;
      margin-top:10px;
    }
    .filter-btn {
      border: none;
      padding:8px 12px;
      border-radius:10px;
      background: #162433;
      color:#cfe6ff;
      cursor:pointer;
      transition: transform .15s ease, background .15s ease;
      font-size:0.9rem;
      box-shadow: 0 2px 8px rgba(0,0,0,0.35);
    }
    .filter-btn:hover { transform: translateY(-3px); }
    .filter-btn.active { background: linear-gradient(135deg,#4f46e5,#06b6d4); color:white; }

    /* ---------- Gallery grid ---------- */
    .gallery {
      margin-top:18px;
      display:grid;
      grid-template-columns: repeat(4, 1fr);
      gap:14px;
    }

    .card {
      position:relative;
      overflow:hidden;
      border-radius:12px;
      background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.15));
      cursor:pointer;
      min-height:160px;
      display:flex;
      align-items:flex-end;
      justify-content:flex-start;
      transition: transform .35s cubic-bezier(.2,.9,.2,1), box-shadow .35s;
      box-shadow: 0 8px 20px rgba(2,6,23,0.6);
    }
    .card img {
      width:100%;
      height:100%;
      object-fit:cover;
      display:block;
      transform-origin:center;
      transition: transform .6s ease;
      will-change: transform;
    }
    .card .overlay {
      position:absolute;
      left:0; right:0; bottom:0;
      padding:10px 12px;
      background: linear-gradient(180deg, rgba(0,0,0,0) 0%, rgba(0,0,0,0.6) 60%);
      color:#fff;
      font-size:0.95rem;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:8px;
    }
    .card:hover { transform: translateY(-6px); box-shadow:0 18px 40px rgba(2,6,23,0.8); }
    .card:hover img { transform: scale(1.08) rotate(.3deg); }

    /* small caption badge */
    .badge {
      background: rgba(255,255,255,0.16);
      padding:4px 8px;
      border-radius:999px;
      font-size:0.8rem;
      color:#f0f7ff;
    }

    /* ---------- Responsive ---------- */
    @media (max-width:1000px) { .gallery { grid-template-columns: repeat(3,1fr); } }
    @media (max-width:700px) { .gallery { grid-template-columns: repeat(2,1fr); } header { flex-direction:column; align-items:flex-start; gap:8px; } }
    @media (max-width:420px) { .gallery { grid-template-columns: 1fr; } }

    /* ---------- Lightbox modal ---------- */
    .lightbox {
      position:fixed;
      inset:0;
      display:none;
      align-items:center;
      justify-content:center;
      background: rgba(3,7,18,0.76);
      z-index:1200;
      padding:24px;
    }
    .lightbox.open { display:flex; }
    .lb-inner {
      position:relative;
      max-width:1000px;
      width:100%;
      max-height:90vh;
      border-radius:12px;
      overflow:hidden;
      background:linear-gradient(180deg,#071027,#021027);
      box-shadow: 0 30px 80px rgba(2,6,23,0.85);
      display:flex;
      align-items:center;
      justify-content:center;
      padding:14px;
    }
    .lb-img {
      max-width:100%;
      max-height:76vh;
      object-fit:contain;
      border-radius:8px;
      transition: transform .35s ease;
    }
    .lb-caption {
      margin-top:8px;
      color:#dbeafe;
      font-size:0.95rem;
      text-align:center;
    }

    /* ---------- Controls ---------- */
    .lb-close, .lb-prev, .lb-next {
      position:absolute;
      top:12px;
      background:transparent;
      border:none;
      color:#e6f0ff;
      font-size:22px;
      padding:10px;
      border-radius:10px;
      cursor:pointer;
      transition: background .15s;
    }
    .lb-close { right:12px; }
    .lb-prev { left:12px; top:50%; transform:translateY(-50%); font-size:28px; }
    .lb-next { right:12px; top:50%; transform:translateY(-50%); font-size:28px; }
    .lb-close:hover, .lb-prev:hover, .lb-next:hover { background: rgba(255,255,255,0.03); }

    /* small helper for keyboard hint */
    .hint {
      font-size:0.8rem;
      color:#a8c6ff;
      margin-left:8px;
    }

    /* hidden (for filtering) */
    .card.hidden { display:none; }
  </style>
</head>
<body>
  <div class="container" role="main">
    <header>
      <div>
        <h1> Image Gallery </h1>
        <p class="lead">Responsive gallery with lightbox, smooth hover effects and category filters.</p>
      </div>

      <div style="text-align:right">
        <div style="font-size:0.9rem; color:#bcd3f0">Controls:
          <span class="hint">Click image • Arrow keys • Esc to close</span>
        </div>
        <div class="filters" aria-label="Image categories" role="toolbar" style="margin-top:8px;">
          <button class="filter-btn active" data-filter="all">All</button>
          <button class="filter-btn" data-filter="nature">Nature</button>
          <button class="filter-btn" data-filter="city">City</button>
          <button class="filter-btn" data-filter="people">People</button>
        </div>
      </div>
    </header>

    <section class="gallery" aria-live="polite">
      <!-- Example images use picsum.photos for placeholders - you can replace URLs with your own -->
      <!-- Each .card contains data attributes: data-id, data-category, data-title -->
      <div class="card" tabindex="0" data-id="0" data-category="nature" data-title="Misty Mountains">
        <img src="https://picsum.photos/id/1018/1200/800" alt="Misty Mountains">
        <div class="overlay">
          <div>Misty Mountains</div>
          <div class="badge">Nature</div>
        </div>
      </div>

      <div class="card" tabindex="0" data-id="1" data-category="city" data-title="Neon City">
        <img src="https://picsum.photos/id/1011/1200/800" alt="Neon City">
        <div class="overlay">
          <div>Neon City</div>
          <div class="badge">City</div>
        </div>
      </div>

      <div class="card" tabindex="0" data-id="2" data-category="people" data-title="Smiling Friend">
        <img src="https://picsum.photos/id/1005/1200/800" alt="Smiling Friend">
        <div class="overlay">
          <div>Smiling Friend</div>
          <div class="badge">People</div>
        </div>
      </div>

      <div class="card" tabindex="0" data-id="3" data-category="nature" data-title="Sunset Lake">
        <img src="https://picsum.photos/id/1025/1200/800" alt="Sunset Lake">
        <div class="overlay">
          <div>Sunset Lake</div>
          <div class="badge">Nature</div>
        </div>
      </div>

      <div class="card" tabindex="0" data-id="4" data-category="city" data-title="Old Alley">
        <img src="https://picsum.photos/id/1031/1200/800" alt="Old Alley">
        <div class="overlay">
          <div>Old Alley</div>
          <div class="badge">City</div>
        </div>
      </div>

      <div class="card" tabindex="0" data-id="5" data-category="people" data-title="Laughing Crowd">
        <img src="https://picsum.photos/id/1027/1200/800" alt="Laughing Crowd">
        <div class="overlay">
          <div>Laughing Crowd</div>
          <div class="badge">People</div>
        </div>
      </div>

      <div class="card" tabindex="0" data-id="6" data-category="nature" data-title="Forest Path">
        <img src="https://picsum.photos/id/1040/1200/800" alt="Forest Path">
        <div class="overlay">
          <div>Forest Path</div>
          <div class="badge">Nature</div>
        </div>
      </div>

      <div class="card" tabindex="0" data-id="7" data-category="city" data-title="Bridge View">
        <img src="https://picsum.photos/id/1056/1200/800" alt="Bridge View">
        <div class="overlay">
          <div>Bridge View</div>
          <div class="badge">City</div>
        </div>
      </div>
    </section>
  </div>

  <!-- Lightbox -->
  <div class="lightbox" id="lightbox" role="dialog" aria-modal="true" aria-label="Image preview">
    <div class="lb-inner" role="document">
      <button class="lb-prev" id="prevBtn" aria-label="Previous image">‹</button>
      <img class="lb-img" id="lbImage" alt="">
      <button class="lb-next" id="nextBtn" aria-label="Next image">›</button>
      <button class="lb-close" id="closeBtn" aria-label="Close viewer">✕</button>
      <div style="position:absolute; left:0; right:0; bottom:8px; text-align:center;">
        <div id="lbCaption" class="lb-caption">Caption</div>
      </div>
    </div>
  </div>

  <script>
    // ---------- DOM references ----------
    const gallery = document.querySelector('.gallery');
    const cards = Array.from(document.querySelectorAll('.card'));
    const filterBtns = Array.from(document.querySelectorAll('.filter-btn'));

    const lb = document.getElementById('lightbox');
    const lbImage = document.getElementById('lbImage');
    const lbCaption = document.getElementById('lbCaption');
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    const closeBtn = document.getElementById('closeBtn');

    // current index is index within "visibleItems" array
    let currentIndex = 0;
    let visibleItems = [...cards]; // initially all

    // ---------- Helpers ----------
    function updateVisibleItems() {
      visibleItems = cards.filter(c => !c.classList.contains('hidden'));
    }

    function openLightboxByCard(card) {
      updateVisibleItems();
      // find index of clicked card within visibleItems
      const id = card.getAttribute('data-id');
      currentIndex = visibleItems.findIndex(c => c.getAttribute('data-id') === id);
      if (currentIndex < 0) currentIndex = 0;
      showLightboxImage(currentIndex);
      lb.classList.add('open');
      // trap focus on close button (simple)
      closeBtn.focus();
    }

    function showLightboxImage(index) {
      const card = visibleItems[index];
      if (!card) return;
      const img = card.querySelector('img');
      const src = img.src;
      const title = card.getAttribute('data-title') || '';
      lbImage.src = src;
      lbImage.alt = title;
      lbCaption.textContent = title + `  •  ${index+1} of ${visibleItems.length}`;
    }

    function closeLightbox() {
      lb.classList.remove('open');
      lbImage.src = '';
    }

    function showNext() {
      if (visibleItems.length === 0) return;
      currentIndex = (currentIndex + 1) % visibleItems.length;
      showLightboxImage(currentIndex);
    }
    function showPrev() {
      if (visibleItems.length === 0) return;
      currentIndex = (currentIndex - 1 + visibleItems.length) % visibleItems.length;
      showLightboxImage(currentIndex);
    }

    // ---------- Events ----------
    // open when clicking a card
    cards.forEach(card => {
      card.addEventListener('click', () => openLightboxByCard(card));
      card.addEventListener('keydown', (e) => {
        if (e.key === 'Enter' || e.key === ' ') {
          e.preventDefault();
          openLightboxByCard(card);
        }
      });
    });

    // next / prev buttons
    nextBtn.addEventListener('click', (e) => { e.stopPropagation(); showNext(); });
    prevBtn.addEventListener('click', (e) => { e.stopPropagation(); showPrev(); });

    // close actions
    closeBtn.addEventListener('click', () => closeLightbox());
    // click outside to close
    lb.addEventListener('click', (e) => {
      if (e.target === lb) closeLightbox();
    });

    // keyboard navigation
    document.addEventListener('keydown', (e) => {
      if (!lb.classList.contains('open')) return;
      if (e.key === 'ArrowRight') { showNext(); }
      if (e.key === 'ArrowLeft') { showPrev(); }
      if (e.key === 'Escape') { closeLightbox(); }
    });

    // ---------- Filtering ----------
    filterBtns.forEach(btn => {
      btn.addEventListener('click', () => {
        filterBtns.forEach(b => b.classList.remove('active'));
        btn.classList.add('active');

        const filter = btn.getAttribute('data-filter');
        if (filter === 'all') {
          cards.forEach(c => c.classList.remove('hidden'));
        } else {
          cards.forEach(c => {
            const cat = c.getAttribute('data-category');
            if (cat === filter) c.classList.remove('hidden'); else c.classList.add('hidden');
          });
        }
        updateVisibleItems();
      });
    });

    // ---------- Touch-friendly swipe on lightbox (basic) ----------
    let touchStartX = 0;
    let touchEndX = 0;
    lbImage.addEventListener('touchstart', (e) => {
      touchStartX = e.changedTouches[0].screenX;
    }, {passive:true});
    lbImage.addEventListener('touchend', (e) => {
      touchEndX = e.changedTouches[0].screenX;
      const diff = touchEndX - touchStartX;
      if (Math.abs(diff) > 40) {
        if (diff < 0) showNext(); else showPrev();
      }
    });

    // ---------- Accessibility: focus trap minimal ----------
    // Keep focus inside the lightbox while open (basic approach)
    document.addEventListener('focus', (e) => {
      if (!lb.classList.contains('open')) return;
      if (!lb.contains(e.target)) {
        e.stopPropagation();
        closeBtn.focus();
      }
    }, true);

    // ---------- Optional: preload images for smoother transitions ----------
    cards.forEach(c => {
      const img = new Image();
      img.src = c.querySelector('img').src;
    });

    // ---------- END ----------
  </script>
</body>
</html>
